<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Konung 2 Save Editor</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <h1>Konung 2 Save Editor</h1>
    <div id="drop-area">
        <p>Drag & drop your KONUNG2 save file here, or click to select</p>
        <form id="upload-form">
            <label for="save-file">Upload Save File:</label>
            <input type="file" id="save-file" accept=".SA0,.SA1,.SA2,.SA3,.SA4,.SA5,.SA6,.SA7,.SA8,.SA9">
        </form>
    </div>
    <div id="editor-section" style="display:none;">
        <h2>Edit Save Data</h2>
        <label id="filename-label"></label>
        <button id="reset-btn" title="Reset">&#10006;</button>
        <button id="download-btn" data-locale-key="download-save">Download Modified Save</button>
        <div id="data-values">
            <div id="gold-block">
                <label id="gold-label" data-locale-key="gold">Gold</label>:
                <input type="number" id="gold-input" value="0" min="0" max="2147483647" />
                <span id="original-gold-label" data-locale-key="original-gold">Original Gold Value</span>:
                <span id="original-gold-value">0</span>
            </div>
            <div id="heroes-block">
                <h4 id="heroes-label" data-locale-key="heroes-list-header">Heroes:</h4>
                <ul id="heroes-list">
                    <li id="hero-1" style="display:none;">
                        <span class="hero-info"></span>
                        <button class="edit-hero-btn" data-hero="1" title="Edit"><span>&#9998;</span></button>
                    </li>
                    <li id="hero-2" style="display:none;">
                        <span class="hero-info"></span>
                        <button class="edit-hero-btn" data-hero="2" title="Edit"><span>&#9998;</span></button>
                    </li>
                    <li id="hero-3" style="display:none;">
                        <span class="hero-info"></span>
                        <button class="edit-hero-btn" data-hero="3" title="Edit"><span>&#9998;</span></button>
                    </li>
                    <li id="hero-4" style="display:none;">
                        <span class="hero-info"></span>
                        <button class="edit-hero-btn" data-hero="4" title="Edit"><span>&#9998;</span></button>
                    </li>
                    <li id="hero-5" style="display:none;">
                        <span class="hero-info"></span>
                        <button class="edit-hero-btn" data-hero="5" title="Edit"><span>&#9998;</span></button>
                    </li>
                    <li id="hero-6" style="display:none;">
                        <span class="hero-info"></span>
                        <button class="edit-hero-btn" data-hero="6" title="Edit"><span>&#9998;</span></button>
                    </li>
                    <li id="hero-7" style="display:none;">
                        <span class="hero-info"></span>
                        <button class="edit-hero-btn" data-hero="7" title="Edit"><span>&#9998;</span></button>
                    </li>
                    <li id="hero-8" style="display:none;">
                        <span class="hero-info"></span>
                        <button class="edit-hero-btn" data-hero="8" title="Edit"><span>&#9998;</span></button>
                    </li>
                    <li id="hero-9" style="display:none;">
                        <span class="hero-info"></span>
                        <button class="edit-hero-btn" data-hero="9" title="Edit"><span>&#9998;</span></button>
                    </li>
                </ul>
            </div>
            <!-- Hero view block for editing -->
            <div id="hero-view-block" style="display:none;">
                <h3 data-locale-key="edit-hero">Edit Hero</h3>
                <div>
                    <span id="short-hero-info-for-editor"></span>
                </div>
                <hr />
                <form id="hero-edit-form">
                    <div>
                        <button type="submit" data-locale-key="save-hero">Save & Close</button>
                    </div>
                    <div class="tabs" id="hero-edit-tabs">
                        <div class="tablist" role="tablist" aria-label="Настройки">
                            <button type="button" class="tab" role="tab" id="tab-1" aria-controls="items-panel"
                                aria-selected="true">Предметы</button>
                            <button type="button" class="tab" role="tab" id="tab-2" aria-controls="stats-panel"
                                aria-selected="false" tabindex="-1">Характеристики</button>
                            <button type="button" class="tab" role="tab" id="tab-3" aria-controls="appearance-panel"
                                aria-selected="false" tabindex="-1">Внешний вид</button>
                        </div>

                        <section class="tabpanel" role="tabpanel" id="items-panel" aria-labelledby="tab-1">

                            <div id="items-block">
                                <h4 data-locale-key="equipped-items">Equipped items</h4>
                                <ul>
                                    <li><span class="bold-text" data-locale-key="item-melee-weapon">Melee Weapon</span>:
                                        <span id="melee-weapon"></span>
                                    </li>
                                    <li><span class="bold-text" data-locale-key="item-ranged-weapon">Ranged
                                            Weapon</span>: <span id="ranged-weapon"></span>
                                    </li>
                                    <li>
                                        <span class="bold-text" data-locale-key="item-body-armor">Body Armor</span>:
                                        <span id="body-armor"></span>
                                    </li>
                                    <li><span class="bold-text" data-locale-key="item-helm-armor">Helm Armor</span>:
                                        <span id="helm-armor"></span>
                                    </li>
                                    <li><span class="bold-text" data-locale-key="item-left-hand">Left Hand</span>: <span
                                            id="left-hand"></span>
                                    </li>
                                    <li><span class="bold-text" data-locale-key="item-neck">Neck</span>: <span
                                            id="neck"></span></li>
                                    <li><span class="bold-text" data-locale-key="item-bracelet-right">Bracelet
                                            Right</span>: <span id="bracelet-right"></span>
                                    </li>
                                    <li><span class="bold-text" data-locale-key="item-bracelet-left">Bracelet
                                            Left</span>: <span id="bracelet-left"></span>
                                    </li>
                                    <li><span class="bold-text" data-locale-key="item-ring-right">Ring Right</span>:
                                        <span id="ring-right"></span>
                                    </li>
                                    <li><span class="bold-text" data-locale-key="item-ring-left">Ring Left</span>: <span
                                            id="ring-left"></span>
                                    </li>
                                    <li><span class="bold-text" data-locale-key="item-arrows">Arrows</span>: <span
                                            id="arrows"></span>
                                    </li>
                                </ul>
                            </div>
                            <div id="hero-inventory-block">
                                <h4 data-locale-key="inventory">Inventory</h4>
                                <ul id="hero-inventory-list">
                                    <!-- Inventory items will be rendered here by app.js -->
                                </ul>
                            </div>
                            <hr />
                            <div class="fast-edit-buttons" id="inventory-item-editor-div">
                                <h4>Редактор предметов</h4>
                                <div>
                                    <label for="inventory-index-input">Номер предмета в инвентаре:</label>
                                    <input id="inventory-index-input" type="number" value="0" min="0" max="42" />
                                </div>
                                <div id="inventory-editor-new-item-form">
                                    <div class="inventory-editor-div">
                                        <span>Текущий предмет в ячейке:</span>
                                        <span id="inventory-item-editor-current-name">???</span>
                                    </div>
                                    <div class="inventory-editor-div">
                                        <label for="inventory-item-type-editor-select">Тип предмета:</label>
                                        <select id="inventory-item-type-editor-select">
                                            <option value="0">Оружие ближнего боя</option>
                                            <option value="1">Лук / Арбалет</option>
                                            <option value="2">Доспех</option>
                                            <option value="3">Шлем</option>
                                            <option value="4">Щит</option>
                                            <!--Game don't have item type 5-->
                                            <option value="6">Ожерелье</option>
                                            <option value="7">Браслет</option>
                                            <option value="8">Кольцо</option>
                                            <option value="9">Зелье / ингридиенты</option>
                                            <!--Game don't have item type 10-->
                                            <option value="12">Стрелы / Болты</option>
                                            <option value="11">Другое</option>
                                        </select>
                                    </div>
                                    <div class="inventory-editor-div">
                                        <label for="inventory-item-editor-select">Выберите предмет:</label>
                                        <select id="inventory-item-editor-select">
                                            <!--Populated by script-->
                                        </select>
                                        <div id="inventory-item-editor-durability-setup" class="inventory-editor-div">
                                            <label for="inventory-item-editor-durability-input">Прочность:</label>
                                            <input id="inventory-item-editor-durability-input" type="number" min="0"
                                                max="99" step="1" value="50" />
                                        </div>
                                        <div id="inventory-item-editor-enchant-setup" class="inventory-editor-div">
                                            <h4>Настройка зачарования:</h4>
                                            <div>
                                                <label>Вын:</label>
                                                <span>
                                                    <input type="radio" name="stat-vit" value="0" checked>0</input>
                                                    <input type="radio" name="stat-vit" value="1">1</input>
                                                    <input type="radio" name="stat-vit" value="2">2</input>
                                                    <input type="radio" name="stat-vit" value="3">3</input>
                                                    <input type="radio" name="stat-vit" value="4">4</input>
                                                    <input type="radio" name="stat-vit" value="5">5</input>
                                                    <input type="radio" name="stat-vit" value="6">6</input>
                                                </span>
                                            </div>
                                            <div>
                                                <label>Сил:</label>
                                                <span>
                                                    <input type="radio" name="stat-str" value="0" checked>0</input>
                                                    <input type="radio" name="stat-str" value="1">1</input>
                                                    <input type="radio" name="stat-str" value="2">2</input>
                                                    <input type="radio" name="stat-str" value="3">3</input>
                                                    <input type="radio" name="stat-str" value="4">4</input>
                                                    <input type="radio" name="stat-str" value="5">5</input>
                                                    <input type="radio" name="stat-str" value="6">6</input>
                                                </span>
                                            </div>
                                            <div>
                                                <label>Лов:</label>
                                                <span>
                                                    <input type="radio" name="stat-agi" value="0" checked>0</input>
                                                    <input type="radio" name="stat-agi" value="1">1</input>
                                                    <input type="radio" name="stat-agi" value="2">2</input>
                                                    <input type="radio" name="stat-agi" value="3">3</input>
                                                    <input type="radio" name="stat-agi" value="4">4</input>
                                                    <input type="radio" name="stat-agi" value="5">5</input>
                                                    <input type="radio" name="stat-agi" value="6">6</input>
                                                </span>
                                            </div>
                                            <div>
                                                <label>Урон:</label>
                                                <span>
                                                    <input type="radio" name="stat-dmg" value="0" checked>0</input>
                                                    <input type="radio" name="stat-dmg" value="1">4</input>
                                                    <input type="radio" name="stat-dmg" value="2">12</input>
                                                    <input type="radio" name="stat-dmg" value="3">20</input>
                                                    <input type="radio" name="stat-dmg" value="4">28</input>
                                                    <input type="radio" name="stat-dmg" value="5">40</input>
                                                    <input type="radio" name="stat-dmg" value="6">48</input>
                                                </span>
                                            </div>
                                            <div>
                                                <label>Броня:</label>
                                                <span>
                                                    <input type="radio" name="stat-armor" value="0" checked>0</input>
                                                    <input type="radio" name="stat-armor" value="1">4</input>
                                                    <input type="radio" name="stat-armor" value="2">12</input>
                                                    <input type="radio" name="stat-armor" value="3">20</input>
                                                    <input type="radio" name="stat-armor" value="4">28</input>
                                                    <input type="radio" name="stat-armor" value="5">40</input>
                                                    <input type="radio" name="stat-armor" value="6">48</input>
                                                </span>
                                            </div>
                                        </div>
                                        <div id="inventory-item-editor-potion-setup" class="inventory-editor-div">
                                            <label
                                                for="inventory-item-editor-potion-concentration-input">Концентрация:</label>
                                            <input id="inventory-item-editor-potion-concentration-input" type="number"
                                                min="0" max="100" step="0.01" value="15" />
                                        </div>
                                        <div id="inventory-item-editor-arrow-setup" class="inventory-editor-div">
                                            <label for="inventory-item-editor-arrow-quantity-input">Количество
                                                стрел:</label>
                                            <input id="inventory-item-editor-arrow-quantity-input" type="number" min="0"
                                                step="1" value="30" />
                                        </div>
                                        <div id="inventory-item-editor-poisoning-setup">
                                            <label
                                                for="inventory-item-editor-applied-poisoning-input">Отравление:</label>
                                            <input id="inventory-item-editor-applied-poisoning-input" type="number"
                                                min="0" max="100" step="1" value="0" />
                                        </div>
                                    </div>
                                    <div>
                                        <button type="button" id="inventory-item-editor-apply-btn">Применить</button>
                                        <span>Заменить предмет в инвентаре на указанный</span>
                                    </div>
                                </div>

                                <hr />
                                <div class="fast-edit-buttons">
                                    <button type="button" id="best-enchants-for-equipped-btn">Топ Зачарования</button>
                                    <span>Применить на все предметы в инвентаре Удр+48 Брн+48 Сил +6 Вын +6 Лов
                                        +6</span>
                                </div>
                                <div class="fast-edit-buttons">
                                    <button type="button" id="potions-refill-btn">Наполнить зелья</button>
                                    <span>Наполнить все зелья героя до указанной концентрации</span>
                                    <input id="potion-concentration-input" type="number" value="15" min="0" max="99999"
                                        step="0.25" />
                                </div>
                            </div>

                        </section>

                        <section class="tabpanel" role="tabpanel" id="stats-panel" aria-labelledby="tab-2">

                            <div id="main-stats-block">
                                <h4>Main Stats</h4>
                                <div>
                                    <label for="free-points-value">Свободный опыт:</label>
                                    <input type="number" id="free-points-value" min="0" max="65535" />
                                </div>
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Stat</th>
                                            <th>Base</th>
                                            <th>Current</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Харизма</td>
                                            <td><input type="number" id="main-stat-base-0" min="0" max="255" /></td>
                                            <td><input type="number" id="main-stat-current-0" min="0" max="255" /></td>
                                        </tr>
                                        <tr>
                                            <td>Ловкость</td>
                                            <td><input type="number" id="main-stat-base-1" min="0" max="255" /></td>
                                            <td><input type="number" id="main-stat-current-1" min="0" max="255" /></td>
                                        </tr>
                                        <tr>
                                            <td>Интеллект</td>
                                            <td><input type="number" id="main-stat-base-2" min="0" max="255" /></td>
                                            <td><input type="number" id="main-stat-current-2" min="0" max="255" /></td>
                                        </tr>
                                        <tr>
                                            <td>Обучаемость</td>
                                            <td><input type="number" id="main-stat-base-3" min="0" max="255" /></td>
                                            <td><input type="number" id="main-stat-current-3" min="0" max="255" /></td>
                                        </tr>
                                        <tr>
                                            <td>Сила</td>
                                            <td><input type="number" id="main-stat-base-4" min="0" max="255" /></td>
                                            <td><input type="number" id="main-stat-current-4" min="0" max="255" /></td>
                                        </tr>
                                        <tr>
                                            <td>Выносливость</td>
                                            <td><input type="number" id="main-stat-base-5" min="0" max="255" /></td>
                                            <td><input type="number" id="main-stat-current-5" min="0" max="255" /></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div id="secondary-stats-block">
                                <h4>Secondary Stats</h4>
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Stat</th>
                                            <th>Value</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Stat 1</td>
                                            <td><input type="number" id="secondary-stat-1" min="0" max="100" /></td>
                                        </tr>
                                        <tr>
                                            <td>Stat 2</td>
                                            <td><input type="number" id="secondary-stat-2" min="0" max="100" /></td>
                                        </tr>
                                        <tr>
                                            <td>Stat 3</td>
                                            <td><input type="number" id="secondary-stat-3" min="0" max="100" /></td>
                                        </tr>
                                        <tr>
                                            <td>Stat 4</td>
                                            <td><input type="number" id="secondary-stat-4" min="0" max="100" /></td>
                                        </tr>
                                        <tr>
                                            <td>Stat 5</td>
                                            <td><input type="number" id="secondary-stat-5" min="0" max="100" /></td>
                                        </tr>
                                        <tr>
                                            <td>Stat 6</td>
                                            <td><input type="number" id="secondary-stat-6" min="0" max="100" /></td>
                                        </tr>
                                        <tr>
                                            <td>Stat 7</td>
                                            <td><input type="number" id="secondary-stat-7" min="0" max="100" /></td>
                                        </tr>
                                        <tr>
                                            <td>Stat 8</td>
                                            <td><input type="number" id="secondary-stat-8" min="0" max="100" /></td>
                                        </tr>
                                        <tr>
                                            <td>Stat 9</td>
                                            <td><input type="number" id="secondary-stat-9" min="0" max="100" /></td>
                                        </tr>
                                        <tr>
                                            <td>Stat 10</td>
                                            <td><input type="number" id="secondary-stat-10" min="0" max="100" /></td>
                                        </tr>
                                        <tr>
                                            <td>Stat 11</td>
                                            <td><input type="number" id="secondary-stat-11" min="0" max="100" /></td>
                                        </tr>
                                        <tr>
                                            <td>Stat 12</td>
                                            <td><input type="number" id="secondary-stat-12" min="0" max="100" /></td>
                                        </tr>
                                        <tr>
                                            <td>Stat 13</td>
                                            <td><input type="number" id="secondary-stat-13" min="0" max="100" /></td>
                                        </tr>
                                        <tr>
                                            <td>Stat 14</td>
                                            <td><input type="number" id="secondary-stat-14" min="0" max="100" /></td>
                                        </tr>
                                        <tr>
                                            <td>Stat 15</td>
                                            <td><input type="number" id="secondary-stat-15" min="0" max="100" /></td>
                                        </tr>
                                        <tr>
                                            <td>Stat 16</td>
                                            <td><input type="number" id="secondary-stat-16" min="0" max="100" /></td>
                                        </tr>
                                        <tr>
                                            <td>Stat 17</td>
                                            <td><input type="number" id="secondary-stat-17" min="0" max="100" /></td>
                                        </tr>
                                        <tr>
                                            <td>Stat 18</td>
                                            <td><input type="number" id="secondary-stat-18" min="0" max="100" /></td>
                                        </tr>
                                        <tr>
                                            <td>Stat 19</td>
                                            <td><input type="number" id="secondary-stat-19" min="0" max="100" /></td>
                                        </tr>
                                        <tr>
                                            <td>Stat 20</td>
                                            <td><input type="number" id="secondary-stat-20" min="0" max="100" /></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </section>

                        <section class="tabpanel" role="tabpanel" id="appearance-panel" aria-labelledby="tab-3">
                            <div class="fast-edit-buttons">
                                <label for="hero-name-select" data-locale-key="hero-name">Hero Name:</label>
                                <select id="hero-name-select"></select>
                                <label for="hero-nickname-select" data-locale-key="hero-nickname">Hero Nickname:</label>
                                <select id="hero-nickname-select"></select>
                            </div>
                            <div class="fast-edit-buttons">
                                <label for="hero-figure-select" data-locale-key="hero-figure">Hero Race and
                                    Gender:</label>
                                <select id="hero-figure-select"></select>
                                <span id="hero-figure-id-hex"></span>
                            </div>
                            <div class="fast-edit-buttons">
                                <label for="hero-appearance-select" data-locale-key="hero-appearance">Hero
                                    Appearance:</label>
                                <select id="hero-appearance-select"></select>
                                <span id="hero-appearance-id-hex"></span>
                            </div>
                            <div class="fast-edit-buttons">
                                <label for="hero-portrait-select" data-locale-key="hero-portrait">Hero Portrait:</label>
                                <select id="hero-portrait-select"></select>
                                <span id="hero-portrait-id-hex"></span>
                                <details>
                                    <summary>О портретах</summary>
                                    <p>Портреты героев взяты из темы на форуме <a
                                            href="https://konung.topbb.ru/viewtopic.php?id=148">Народный Форум Князя</a>
                                    </p>
                                    <img src="/media/portraits.png" alt="Hero Portraits">
                                </details>
                            </div>
                        </section>
                    </div>
                    <hr />
                    <button type="submit" data-locale-key="save-hero">Save & Close</button>
                    <!-- <button type="button" id="cancel-hero-edit">Cancel</button> -->
                    <!--<hr />
                    <div class="fast-edit-buttons">
                        <button type="button" id="test-btn">Test Btn</button>
                    </div> -->
                </form>
            </div>
            <!--<div class="fast-edit-buttons">
                <button type="button" id="test-btn">Test Btn</button>
            </div> -->
        </div>
    </div>
    <script type="module" src="./app.js"></script>
</body>

</html>